<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="tr" lang="tr">
    <head>
        <meta charset="utf-8">
       
        <meta name="description"
              content="Videoları izleyerek rankları tahmin et ve büyük ödüller kazan!">
        <meta name="viewport"
              content="width=device-width, initial-scale=1, maximum-scale=1">
        <link rel="stylesheet" type="text/css" href="{{ static("css/main.css") }}">
        <script src="https://cdn.tailwindcss.com"></script>
        <style>
          /* Sadece yazdırma için özel stiller */
          @media print {
              body * {
                  visibility: hidden; /* Diğer her şeyi gizle */
              }
              #print-area, #print-area * {
                  visibility: visible; /* Sadece yazdırılacak alanı görünür yap */
              }
              #print-area {
                  position: absolute;
                  top: 0;
                  left: 0;
              }
          }
      </style>
    </head>
    <body class="body">
        <div class=" bg-white max-w-screen-2xl mx-auto p-4 h-full w-full min-h-screen">
            <section>
                <div class="max-w-3xl mx-auto py-0 md:py-16">
                  <article class="shadow-none md:shadow-md md:rounded-md overflow-hidden">
                    <div class="md:rounded-b-md  bg-white">
                      <div class="p-9 border-b border-gray-200">
                        <div class="space-y-6">
                          <div class="flex justify-between items-top">
                            <div class="space-y-4">
                              <div>
                                <span class="logo text-3xl font-bold text-gray-900">A-31</span>
                                <p class="font-bold text-lg">Invoice</p>
                                <p>MJWebs</p>
                              </div>
                              <div>
                                <p class="font-medium text-sm text-gray-400">Billed To</p>
                                <p>{{ invoice.costumer.name }}</p>
                              </div>
                            </div>
                            <div class="space-y-2">
                              <div>
                                <p class="font-medium text-sm text-gray-400">Invoice Number</p>
                                <p>A31-{{ invoice.invoice_number }}</p>
                              </div>
                              <div>
                                <p class="font-medium text-sm text-gray-400">Invoice Date</p>
                                <p>{{ invoice.date_time.strftime("%B %d, %Y") }}</p>
                              </div>
                              <div>
                                <p class="font-medium text-sm text-gray-400">ABN</p>
                                <p>{{ invoice.costumer.phone_number }}</p>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="p-9 border-b border-t border-gray-200">
                        <p class="font-medium text-sm text-gray-400">Note</p>
                        <p class="text-sm">Thank you for your order.</p>
                      </div>
                      <table class="w-full divide-y divide-gray-200 text-sm">
                        <thead>
                          <tr>
                            <th scope="col" class="px-9 py-4 text-left font-semibold text-gray-400">Item</th>
                            <th scope="col" class="py-3 text-left font-semibold text-gray-400"></th>
                            <th scope="col" class="py-3 text-left font-semibold text-gray-400">Amount</th>
                            <th scope="col" class="py-3 text-left font-semibold text-gray-400"></th>
                          </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                          {% for product in invoice_products %}
                            <tr>
                              <td class="px-9 py-5 whitespace-nowrap space-x-1 flex items-center">
                                <div>
                                  <p>{{ product.product.name }} ({{ product.count }})</p>
                                  <p class="text-sm text-gray-400">{{ product.product.color }}-{{ product.product.code }}</p>
                                </div>
                              </td>
                              <td class="whitespace-nowrap text-gray-600 truncate">Roll({{ product.total_metre }})</td>
                              <td class="whitespace-nowrap text-gray-600 truncate" id = "product-price">${{ product.total_price }}</td>
                            </tr>
                          {% endfor %}
                        </tbody>
                      </table>
                      <div class="p-9 border-b border-t border-gray-200 ">
                        <div class="space-y-3">
                          <div class="flex justify-between">
                            <div>
                              <p class="text-gray-500 text-sm">Total Metre</p>
                            </div>
                            <p class="text-gray-500 text-sm">{{ invoice.total_metre }} Metre</p>
                          </div>
                        </div>
                      </div>
                      <div class="p-9 border-b border-gray-200 divide-y divide-gray-200">
                        <div class="space-y-3">
                          <div class="flex justify-between">
                            <div>
                              <p class="font-bold text-black text-lg">Amount Due</p>
                            </div>
                            <p class="font-bold text-black text-lg">${{ invoice.total_invoice_price }}</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </article>
                </div>
              </section>
        </div>
    </body>
    <script src="{{ static('js/main.js') }}"></script>
      <script>
        // Sayfa yüklendiğinde otomatik yazdırma işlemini başlat
        document.addEventListener("DOMContentLoaded", () => {
            const params = new URLSearchParams(window.location.search);
            if (params.get("autoPrint") === "true") {
                window.print();
                // Yazdırma işlemi sonrası detail sayfasına geri dön
                window.onafterprint = () => {
                    window.location.href = "/detail";
                };
            }
        });
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
</html>
 